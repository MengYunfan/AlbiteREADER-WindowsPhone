<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Albite READER</title>
        <meta name="viewport" content="width=%{viewport_width}, user-scalable=no, initial-zoom=1" />
        <link rel="stylesheet" type="text/css" href="Base.css" />
        <link rel="stylesheet" type="text/css" href="Theme.css" />
        <script type="text/javascript" src="Albite.js" />
        <script type="text/javascript">
            albite = new Albite(window, %{full_page_width}, %{initial_location}, %{debug});

            /*
             * Export Albite functions to WebBrowser.InvokeScript
             */
            function albite_goToPage1(page) {
                /*
                 * All input values are strings.
                 * Don't forget to convert the to numbers!
                 */
                albite.goToPage1(parseInt(page));
            }

            function albite_goToPage2() {
                albite.goToPage2();
            }

            function albite_getPageCount() {
                return albite_return(albite.getPageCount());
            }

            function albite_getCurrentPageNumber() {
                return albite_return(albite.getCurrentPageNumber());
            }

            function albite_getPageForLocation(elementIndex, textOffset) {
                var e = parseInt(elementIndex);
                var t = parseInt(textOffset);

                return albite_return(albite.getPageForLocation(e, t));
            }

            /*
             * All returned values to the host MUST
             * be converted to strings first or otherwise
             * InvokeScript returns an empty string.
             */
            function albite_return(val) {
                return "" + val;
            }
        </script>
    </head>
    <body>
        <div class="page">
            <div class="page_content_box">
                <div class="page_content_clipper">
                    <iframe class="page_content_frame" src="%{chapter_file}" marginWidth="0" marginHeight="0" scrolling="no" width="100%" height="100%" frameborder="0" onload="albite.contentLoaded(this);"/>
                </div>
            </div>
        </div>
    </body>
</html>
